jQuery(function(o){function e(t,i){new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){1===e.nodeType&&(el=e.querySelector(t))&&i(t)})})}).observe(document,{subtree:!0,childList:!0})}function t(e){r(e,function(e){o(e).submit(function(e){var t=o(this).closest("form");return t.append('<input type="hidden" name="easycredit[submit]" value="1" />'),t.append('<input type="hidden" name="terms" value="On" />'),t.append('<input type="hidden" name="legal" value="On" />'),e.detail&&e.detail.numberOfInstallments&&t.append('<input type="hidden" name="easycredit[financingTerm]" value="'+e.detail.numberOfInstallments+'" />'),t.submit(),!1}),o("form.checkout").on("checkout_place_order",function(){return!o("easycredit-checkout").is(":visible")||!o("easycredit-checkout").prop("isActive")||""!==o("easycredit-checkout").prop("paymentPlan")||""!==o("easycredit-checkout").prop("alert")||0<o(this).find('input[name="easycredit[submit]"]').length||(o(e).get(0).dispatchEvent(new Event("openModal")),!1)}),o(document.body).on("checkout_error",function(){o(e).get(0).dispatchEvent(new Event("closeModal"))})})}var i=o("meta[name=easycredit-widget-selector]").attr("content"),n=o("<easycredit-widget />").attr({"webshop-id":o("meta[name=easycredit-api-key]").attr("content"),amount:o("meta[name=easycredit-widget-price]").attr("content")}),r=(o(i).filter(function(){return"hidden"!==o(this).css("visibility")&&0!==o(this).css("opacity")}).first().after(n),o(".single_variation_wrap").on("show_variation",function(e,t){t.display_price&&n.get(0).setAttribute("amount",t.display_price)}),o(".woocommerce-checkout").on("change","#billing_company",function(){o(this).trigger("update_checkout")}),function(e,t){document.querySelector(e)&&window.setTimeout(function(){if(!document.querySelector(e).classList.contains("hydrated"))return r(e,t);t(e)},50)});e("easycredit-checkout",t),r("easycredit-checkout",t);function a(e){r(e,function(n){o(n).submit(function(e){var t=o(this).closest(".summary").find("form.cart"),i=(0===t.length&&(t=o("body").find("form.cart")),document.querySelector('button[name="add-to-cart"], button.single_add_to_cart_button'));i?(t=function(e,t){if(!e)return!1;var i,n=document.createElement("form"),o=(n.setAttribute("action",e.getAttribute("action")),n.setAttribute("method",e.getAttribute("method")),n.style.display="none",new FormData(e));for(const a in t)o.set(a,t[a]);for(i of o.keys()){var r=document.createElement("input");r.setAttribute("name",i),r.setAttribute("value",o.get(i)),n.append(r)}return document.querySelector("body").append(n),n}(t.get(0),{"add-to-cart":i.getAttribute("value"),"easycredit-express":1})).submit():0<o(this).closest(".wc-proceed-to-checkout").length?window.location.href=o(this).data("url"):alert("Der easyCredit Zahlungsprozess konnte nicht gestartet werden.")}),o("form.variations_form").on("show_variation",function(e,t,i){i?o(n).show():o(n).hide()})})}var s,c,d,u,l,m;e("easycredit-express-button",a),r("easycredit-express-button",a);(i=document.querySelector("easycredit-box-listing.easycredit-box-listing-adjusted"))&&(m=(u=[...(s=i).parentElement.children].filter(e=>e!=s))[0].clientWidth,c=u[0].clientHeight,d=u[0].classList,i.style.width=m+"px",i.style.height=c+"px",i.style.visibility="hidden",i.classList=i.classList+" "+d,"LI"===u[0].tagName)&&(i.style.display="list-item",i.style.listStyle="none","UL"===i.parentElement.tagName)&&(i.parentElement.classList=i.parentElement.classList+" easycredit-card-columns-adjusted"),r("easycredit-box-listing",function(){var e=document.querySelector("easycredit-box-listing.easycredit-box-listing-adjusted");e&&(e.shadowRoot.querySelector(".ec-box-listing").style.maxWidth="100%",e.shadowRoot.querySelector(".ec-box-listing").style.height="100%",e.shadowRoot.querySelector(".ec-box-listing__image").style.minHeight="100%",e.style.visibility="")}),(m=document.querySelector("easycredit-box-listing"))&&(c=[...(l=m).parentElement.children].filter(e=>e!=l),d=m.getAttribute("position"),u=Number(d-1),i=Number(d-2),!d||u<=0||(i in c?c[i].after(m):m.parentElement.append(m)))});
//# sourceMappingURL=easycredit.min.js.map