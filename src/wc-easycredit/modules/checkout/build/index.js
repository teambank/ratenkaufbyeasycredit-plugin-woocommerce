(()=>{"use strict";var e={20:(e,t,n)=>{var r=n(609),a=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,n){var r,c={},d=null,u=null;for(r in void 0!==n&&(d=""+n),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!i.hasOwnProperty(r)&&(c[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===c[r]&&(c[r]=t[r]);return{$$typeof:a,type:e,key:d,ref:u,props:c,_owner:s.current}}},848:(e,t,n)=>{e.exports=n(20)},609:e=>{e.exports=window.React}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}(()=>{const e=window.wc.wcBlocksRegistry,t=window.wp.element,r=window.wp.i18n,a=window.wp.htmlEntities,o=window.wc.wcSettings;var s=n(848);const i=e=>{const n=(0,o.getSetting)(e+"_data"),i=({billing:r,eventRegistration:o,activePaymentMethod:i})=>{const{onCheckoutFail:c,onCheckoutValidation:d}=o,u=(0,t.useRef)(null),l=(0,t.useRef)(!1);return(0,t.useEffect)((()=>{u.current&&u.current.addEventListener("submit",(()=>{l.current=!0,(()=>{let e;do{e=document.querySelector(".wc-block-components-checkout-place-order-button")}while(e.disabled);e.dispatchEvent(new window.MouseEvent("click",{bubbles:!0}))})()}))}),[]),(0,t.useEffect)((()=>i!==n.id||d((()=>!u.current||!(!l.current&&"easycredit_ratenkauf"===e)||(u.current.dispatchEvent(new Event("openModal")),{errorMessage:"Bitte stimmen Sie der DatenÃ¼bermittlung zu."})))),[d,i,l]),(0,t.useEffect)((()=>i!==n.id||c((()=>{u.current&&u.current.dispatchEvent(new Event("closeModal"))}))),[c,i]),(0,s.jsx)("easycredit-checkout",{ref:u,"webshop-id":(0,a.decodeEntities)(n.apiKey),amount:r.cartTotal.value/100,"payment-type":n.paymentType})},c=()=>(0,s.jsx)("easycredit-checkout-label",{"payment-type":n.paymentType});let d={name:e,content:(0,s.jsx)(i,{}),edit:(0,s.jsx)(i,{}),canMakePayment:()=>n.enabled,paymentMethodId:n.id,label:(0,s.jsx)(c,{}),ariaLabel:"easycredit"};return"easycredit_rechnung"===e&&(d={...d,placeOrderButtonLabel:(0,r.__)("Continue to pay by invoice")}),"easycredit_ratenkauf"===e&&(d={...d,placeOrderButtonLabel:(0,r.__)("Continue to pay by installments")}),d},c=Object.fromEntries(Object.entries((0,o.getSetting)("paymentMethodData")).filter((([e,t])=>e.match(/^easycredit_/)))),d=c.easycredit_ratenkauf,u=e=>{const n=(0,t.useRef)(null);(0,t.useEffect)((()=>{n.current&&n.current.addEventListener("submit",(e=>{const t=(e=>{let t={};e.express="1";for(let[n,r]of Object.entries(e))t["easycredit["+n+"]"]=r;return t})(e.detail),n=new URLSearchParams(t).toString();window.location.href=d.expressUrl+"?"+n}))}),[n]);const r=e.billing.cartTotal.value/100;return(0,s.jsx)("easycredit-express-button",{ref:n,"webshop-id":(0,a.decodeEntities)(d.apiKey),amount:r,"payment-types":l("paymentType").join(",")})},l=e=>Object.entries(c).map((t=>t[1][e])),p={name:"easycredit",content:(0,s.jsx)(u,{}),edit:(0,s.jsx)(u,{}),canMakePayment:()=>l("enabled").some(Boolean)},y=i("easycredit_rechnung");(0,e.registerPaymentMethod)(y);const m=i("easycredit_ratenkauf");if((0,e.registerPaymentMethod)(m),y.name===p.name||m.name===p.name)throw new Error("express method and normal payment method may not have the same name");(0,e.registerExpressPaymentMethod)(p)})()})();